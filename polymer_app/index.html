<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>My Polymer App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src=".\bower_components\webcomponentsjs\webcomponents-lite.min.js"></script>
    <link rel="import" href=".\bower_components\px-data-table\px-data-table.html"></link>
    <link rel="import" href=".\bower_components\iron-ajax\iron-ajax.html"></link>
    <link rel="import" href=".\bower_components\px-icon-set\px-icon-set.html"></link>
</head>
<body>
    <dom-module id="px-data-table-demo">
        <template>
            <iron-ajax
                auto
                url="json_array.json"
                params='{}'
                handle-as="json"
                on-response = "_handleResponse"
                debounce-duration="300">
            </iron-ajax>
            <px-data-table id="mytable" table-data="{{data}}" language="en" hide-pagination-control>
                <px-data-table-column>
                    <span on-mouseover='onCellHovered' on-mouseout='onCellUnHovered'>
                    <template is="dom-if" if="{{_showCustomIcon}}" >
                        <px-icon icon="px-utl:chevron-up"></px-icon>
                    </template>
                    </span>
                </px-data-table-column>
                <px-data-table-column name='name' type="html">
                </px-data-table-column>
                <px-data-table-column name='position'>
                </px-data-table-column>
                <px-data-table-column name='office'>
                </px-data-table-column>
                <px-data-table-column name='extn'>
                </px-data-table-column>
                <px-data-table-column name='start_date'>
                </px-data-table-column>
                <px-data-table-column name='salary'>
                </px-data-table-column>
            </px-data-table>

        </template>
    </dom-module>
    <px-data-table-demo></px-data-table-demo>
    <script>
        Polymer({
            is:"px-data-table-demo",
            properties:{
                data:{
                    type:Array,
                    reflectToAttribute:true,
                    norify:true
                },
                _showCustomIcon:{
                    type: Boolean,
                    value: false
                }
            },
            _handleResponse: function(event, request) {
                this.data = request.response;
            },
            onCellHovered: function(evt){
                this.set('_showCustomIcon', true);
            },
             onCellUnHovered: function(evt){
                this.set('_showCustomIcon',false);
            }
        });

        document.getElementById("mytable").addEventListener("px-row-click", function(e) {
            var clickedRow = e.detail.row.row;
            //console.log("Row clicked", clickedRow);
            console.log(clickedRow.name.value + " is a " + clickedRow.position.value + " at " + clickedRow.office.value);
        });
        document.getElementsByClassName("px-data-table-cell-0")[0] = "<px-icon icon=\"px-utl:chevron-up\"></px-icon>";
    </script>
    </body>
</html>